var BPlayer={insertPlayer:function(j,d,c,k,b,e,h,g,l,a,f,i){BPlayer.insertHTML5Player(j,d,c,k,b,e,h,g,l,a,f,i)},insertHTML5Player:function(c,g,l,k,e,a,n,r,p,i,m,j){var f=c;if(c.indexOf("://")<0&&(c.indexOf("/raw/static/")==0||c.indexOf("/secstatic/qtieditor/")>=0||c.indexOf("/secstatic/qti/")>=0)){f=c}else{if(c.indexOf("://")<0&&((n!="rtmp"&&n!="http")||((n=="rtmp"||n=="http")&&(r==undefined||r.length==0)))){var d=document.location.href;f=d.substring(0,d.lastIndexOf("/"));if(c.indexOf("/")!=0){f+="/"}f+=c}}var b={file:f,width:l,height:k,controlbar:{position:"bottom"}};if(typeof n!="undefined"){b.provider=n}if(n=="rtmp"||n=="http"){b.streamer=r}if(typeof e!="undefined"){var h=BPlayer._convertInSeconds(e);if(h>0){b.start=h}}if(typeof a!="undefined"){var q=BPlayer._convertInSeconds(a);if(q>0){b.duration=q}}if(typeof p!="undefined"&&p){b.autostart=true}if(typeof i!="undefined"&&i){b.repeat="single"}if(typeof m!="undefined"&&!m){b.controlbar="none"}if(typeof j!="undefined"){b.image=j}if(BPlayer._needJWPlayerFallback(b)){b.flashplayer=BPlayer._jwPlayerBaseUrl()+"movieViewer.swf";var o=function(){jwplayer(g).setup(b)};BPlayer._loadJWPlayer(o)}else{var o=function(){BPlayer._insertHTML5MediaElementPlayerWorker(g,b)};BPlayer.loadMediaelementJsPlayer(o)}},loadMediaelementJsPlayer:function(d){var a=BPlayer._mediaElementBaseUrl();var c=a+(BPlayer.debugEnabled?"mediaelementplayer.css":"mediaelementplayer.min.css");var b=a+(BPlayer.debugEnabled?"mediaelement-and-player.js":"mediaelement-and-player.min.js");if(jQuery("#mediaelementplayercss").length==0){jQuery("<link>").appendTo("head").attr({id:"mediaelementplayercss",type:"text/css",rel:"stylesheet"}).attr("href",c)}if(typeof jQuery("body").mediaelementplayer!="undefined"){if(d){d()}}else{jQuery.ajax({dataType:"script",cache:true,async:false,url:b}).done(function(){if(d){d()}})}},_loadJWPlayer:function(a){if(BPlayer._isIE8()&&domId!="prev_container"&&jQuery("#"+domId).is("span")){alert("This is video is not supported on Internet Explorer 8. Sorry for the inconvenience")}else{jQuery.getScript(BPlayer._jwPlayerBaseUrl()+"player.jw.js",function(){if(a){a()}})}},_needJWPlayerFallback:function(a){if(a.provider=="rtmp"){if(a.file.match(/(.*)\/((flv|mp4|mp3):.*)/)){return false}else{return true}}return false},_insertHTML5MediaElementPlayerWorker:function(e,d){var j=BPlayer._mediaElementBaseUrl();var k={loop:d.repeat,pluginPath:j,stretching:"responsive",hls:{path:j+"hls/hls.min.js"},flv:{path:j+"flv/flv.min.js"},success:function(n,p,o){if(d.autostart){try{o.load();o.play()}catch(q){if(window.console){console.log(q)}}}if(d.start){var r=true;if(!d.autostart){o.play()}n.addEventListener("loadedmetadata",function(){try{o.setCurrentTime(d.start);if(!d.autostart&&r){r=true;o.pause()}}catch(s){if(window.console){console.log(s)}}})}}};var a=null;var m=d.file.split(".").pop().toLowerCase().split("&").shift();if(d.provider=="sound"){if(m=="mp3"){a="audio/mp3"}else{if(m=="aac"){a="audio/aac"}else{if(m=="m4a"){a="audio/mp4"}}}}else{if(d.provider=="youtube"){a="video/youtube"}else{if(d.provider=="vimeo"){a="video/vimeo"}else{if(d.provider=="rtmp"){k.flashStreamer=d.streamer;a="video/rtmp"}else{if(d.provider=="http"){d.enablePseudoStreaming=true;if(m=="flv"){a="video/flv"}else{a="video/mp4"}}else{if(m=="flv"){a="video/flv"}else{if(m=="f4v"){a="video/flv"}else{if(m=="mp4"){a="video/mp4"}else{if(m=="m4v"){a="video/m4v"}else{if(m=="m3u8"){a="application/x-mpegURL"}else{if(m=="aac"){a="audio/mp4";d.provider="sound"}else{if(m=="mp3"){a="audio/mp3";d.provider="sound"}else{if(m=="m4a"){a="audio/mp4";d.provider="sound"}else{if(d.file.indexOf("vimeo.com")>-1){a="video/vimeo"}else{if(d.file.indexOf("youtube.com")>-1||d.file.indexOf("youtu.be")>-1||d.file.indexOf("youtube.be")>-1){a="video/youtube"}else{if(m.indexOf("mp4?")==0){a="video/mp4"}else{alert("Something go badly wrong!"+d.provider+"  "+m)}}}}}}}}}}}}}}}}var i;var c=e+"_oo"+Math.floor(Math.random()*1000000)+"vid";var f=e+"_oo"+Math.floor(Math.random()*1000000)+"obj";if(d.provider=="sound"){if(d.height){k.audioHeight=d.height}if(d.width){k.audioWidth=d.width}i="<audio id='"+c+"' controls='controls' oncontextmenu='return false;'";if(typeof d.repeat!="undefined"&&d.repeat){i+=" loop='loop'"}var b="<object id='"+f+"' type='application/x-shockwave-flash'";if(typeof d.height!="undefined"){i+=" height='"+d.height+"'";b+=" height='"+d.height+"'";k.videoHeight=d.height}if(typeof d.width!="undefined"){i+=" width='"+d.width+"'";b+=" width='"+d.width+"'";k.videoWidth=d.width}if(typeof d.image!="undefined"){i+=" poster='"+d.image+"'"}i+="><source type='"+a+"' src='"+d.file+"'>";var g="mediaelement-flash-video.swf";if(a=="audio/mp3"){g="mediaelement-flash-audio.swf"}else{if(a=="audio/ogg"){g="mediaelement-flash-audio-ogg.swf"}}i+=b+" data='"+j+g+"'>";i+="<param name='movie' value='"+j+g+"' />";i+="<param name='flashvars' value='controls=true&amp;";if(typeof d.streamer!="undefined"){i+="&amp;streamer="+d.streamer}i+="&amp;file="+d.file+"' /></object>";i+="</audio>"}else{i="<video id='"+c+"' controls='controls' preload='none' oncontextmenu='return false;'";if(typeof d.repeat!="undefined"&&d.repeat){i+=" loop='loop'"}var b="<object id='"+f+"' type='application/x-shockwave-flash'";if(typeof d.height!="undefined"){i+=" height='"+d.height+"'";b+=" height='"+d.height+"'";k.videoHeight=d.height}if(typeof d.width!="undefined"){i+=" width='"+d.width+"'";b+=" width='"+d.width+"'";k.videoWidth=d.width}if(typeof d.image!="undefined"){i+=" poster='"+d.image+"'"}i+="><source type='"+a+"' src='"+d.file+"' />";i+=b+" data='"+j+"mediaelement-flash-video.swf'>";i+="<param name='movie' value='"+j+"mediaelement-flash-video.swf' />";i+="<param name='flashvars' value='controls=true";if(typeof d.streamer!="undefined"){i+="&amp;streamer="+d.streamer}i+="&amp;file="+d.file+"' /></object></video>"}var h=jQuery("#"+e);h.css({height:"auto"});if(jQuery(window).width()<=d.width){h.css({width:"auto"})}h.html(i);if(a=="video/vimeo"){var j=BPlayer._mediaElementBaseUrl();var l=j+(BPlayer.debugEnabled?"renderers/vimeo.js":"renderers/vimeo.min.js");jQuery.ajax({dataType:"script",cache:true,async:false,url:l}).done(function(){jQuery("#"+c).mediaelementplayer(k)})}else{jQuery("#"+c).mediaelementplayer(k)}},_mediaElementBaseUrl:function(){var a=BPlayer._findBaseUrl(window);if(a==null){a="/olat/raw/_noversion_/"}a+="movie/mediaelementjs/";return a},_isIE8:function(){return(jQuery.support.opacity==false)},_jwPlayerBaseUrl:function(){var a=BPlayer._findBaseUrl(window);if(a==null){a="/olat/raw/_noversion_/"}a+="movie/jw/";return a},_findBaseUrl:function(a){if(a.o_info){return a.o_info.o_baseURI}else{if(a.opener){return BPlayer._findBaseUrl(a.opener)}else{if(a.parent){return BPlayer._findBaseUrl(a.parent)}else{return null}}}},_convertInSeconds:function(d){if(typeof d=="undefined"||d==null){return 0}if(!d.length){return d}if(d.length==0){return 0}if(d.indexOf(".")>0){d=d.substring(0,d.indexOf("."))}var e=d.lastIndexOf(":");if(e>0){var c=d.substring(e+1,d.length);var a=parseInt(c);d=d.substring(0,e);e=d.lastIndexOf(":");if(e>0){var b=d.substring(e+1,d.length);a+=60*parseInt(b)}d=d.substring(0,e);if(d.length>0){a+=60*60*parseInt(d)}return a}else{return d}},_isOODebug:function(a){if(a.o_info){return a.o_info.debug}else{if(a.opener){return BPlayer._isOODebug(a.opener)}else{if(a.parent){return BPlayer._isOODebug(a.parent)}else{return false}}}}};BPlayer.debugEnabled=BPlayer._isOODebug(window);